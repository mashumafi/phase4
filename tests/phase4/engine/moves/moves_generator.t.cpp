#include <phase4/engine/moves/moves_generator.h>

#include <doctest/doctest.h>

#include <phase4/engine/moves/moves_generator.h>

#include <phase4/engine/common/square.h>

#include <doctest/doctest.h>

TEST_CASE("MovesGenerator getKnightMoves") {
	using namespace phase4::engine::common;
	using namespace phase4::engine::moves;

	//                                                       HHHHHHHH GGGGGGGG FFFFFFFF EEEEEEEE DDDDDDDD CCCCCCCC BBBBBBBB AAAAAAAA
	//                                                       87654321 87654321 87654321 87654321 87654321 87654321 87654321 87654321
	CHECK(MovesGenerator::getKnightMoves(0, Square::A1) == 0b00000000'00000000'00000000'00000000'00000000'00000010'00000100'00000000);
	CHECK(MovesGenerator::getKnightMoves(0, Square::A2) == 0b00000000'00000000'00000000'00000000'00000000'00000101'00001000'00000000);
	CHECK(MovesGenerator::getKnightMoves(0, Square::B2) == 0b00000000'00000000'00000000'00000000'00000101'00001000'00000000'00001000);
	CHECK(MovesGenerator::getKnightMoves(0, Square::C5) == 0b00000000'00000000'00000000'00101000'01000100'00000000'01000100'00101000);
	CHECK(MovesGenerator::getKnightMoves(0, Square::D8) == 0b00000000'00000000'01000000'00100000'00000000'00100000'01000000'00000000);
	CHECK(MovesGenerator::getKnightMoves(0, Square::E1) == 0b00000000'00000010'00000100'00000000'00000100'00000010'00000000'00000000);
	CHECK(MovesGenerator::getKnightMoves(0, Square::F4) == 0b00010100'00100010'00000000'00100010'00010100'00000000'00000000'00000000);
	CHECK(MovesGenerator::getKnightMoves(0, Square::G7) == 0b00010000'00000000'00010000'10100000'00000000'00000000'00000000'00000000);
	CHECK(MovesGenerator::getKnightMoves(0, Square::H2) == 0b00000000'00001000'00000101'00000000'00000000'00000000'00000000'00000000);
}

TEST_CASE("MovesGenerator getKingMoves") {
	using namespace phase4::engine::common;
	using namespace phase4::engine::moves;

	//                                                  HHHHHHHH GGGGGGGG FFFFFFFF EEEEEEEE DDDDDDDD CCCCCCCC BBBBBBBB AAAAAAAA
	//                                                  87654321 87654321 87654321 87654321 87654321 87654321 87654321 87654321
	CHECK(MovesGenerator::getKingMoves(0, Square::A1) == 0b00000000'00000000'00000000'00000000'00000000'00000000'00000011'00000010);
	CHECK(MovesGenerator::getKingMoves(0, Square::A2) == 0b00000000'00000000'00000000'00000000'00000000'00000000'00000111'00000101);
	CHECK(MovesGenerator::getKingMoves(0, Square::B2) == 0b00000000'00000000'00000000'00000000'00000000'00000111'00000101'00000111);
	CHECK(MovesGenerator::getKingMoves(0, Square::C5) == 0b00000000'00000000'00000000'00000000'00111000'00101000'00111000'00000000);
	CHECK(MovesGenerator::getKingMoves(0, Square::D8) == 0b00000000'00000000'00000000'11000000'01000000'11000000'00000000'00000000);
	CHECK(MovesGenerator::getKingMoves(0, Square::E1) == 0b00000000'00000000'00000011'00000010'00000011'00000000'00000000'00000000);
	CHECK(MovesGenerator::getKingMoves(0, Square::F4) == 0b00000000'00011100'00010100'00011100'00000000'00000000'00000000'00000000);
	CHECK(MovesGenerator::getKingMoves(0, Square::G7) == 0b11100000'10100000'11100000'00000000'00000000'00000000'00000000'00000000);
	CHECK(MovesGenerator::getKingMoves(0, Square::H2) == 0b00000101'00000111'00000000'00000000'00000000'00000000'00000000'00000000);
}
